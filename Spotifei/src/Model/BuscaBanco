package Model;

import java.sql.*;
import java.util.ArrayList;
import java.util.List;
import database.ConeccaoBanco;

public class BuscaBanco {
    public static List<String> buscarMusicas(String termo) {
        List<String> resultados = new ArrayList<>();

        // Se o termo estiver vazio ou padr√£o, j√° retorna lista vazia
        if (termo == null || termo.trim().isEmpty() || termo.trim().equals("....")) {
            return resultados;
        }

        try {
            Connection conn = ConeccaoBanco.conectar();

            // Modificando a query para incluir a busca por nome, artista ou g√™nero
            String sql = "SELECT * FROM musicas WHERE nome LIKE ? OR artista LIKE ? OR genero LIKE ?";





            PreparedStatement stmt = conn.prepareStatement(sql);
            String termoBusca = "%" + termo.trim() + "%";

            // Definindo os par√¢metros para a busca
            stmt.setString(1, termoBusca);
            stmt.setString(2, termoBusca);
            stmt.setString(3, termoBusca);

            ResultSet rs = stmt.executeQuery();

            while (rs.next()) {
                String nome = rs.getString("nome");
                String artista = rs.getString("artista");
                String genero = rs.getString("genero");
                resultados.add("üéµ " + nome + " | " + artista + " | " + genero);
            }

            rs.close();
            stmt.close();
            conn.close();
        } catch (SQLException e) {
            System.out.println("Erro ao buscar m√∫sicas: " + e.getMessage());
            e.printStackTrace();
        }

        return resultados;
    }
}